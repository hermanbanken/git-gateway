{
    "name": "git-gateway",
    "env": {
        "GITGATEWAY_JWT_SECRET": {
            "description": "Secret used for checking JWT signatures",
            "generator": "secret"
        },

        "GITGATEWAY_GITHUB_ACCESS_TOKEN": {
            "description": "Your GitHub personal-access-token; required for single-tenant mode",
            "value": "",
            "required": false
        },

        "GITGATEWAY_GITHUB_REPO": {
            "description": "Your GitHub repo; required for single-tenant mode",
            "value": "owner/name",
            "required": false
        },

        "GITGATEWAY_ROLES": {
            "description": "Which JWT roles to allow; leave blank to allow all roles",
            "value": "admin,cms",
            "required": false
        },

        "GITGATEWAY_OPERATOR_TOKEN": {
            "description": "Secret used for Operator JWT signatures (for multi-tenant mode)",
            "generator": "secret"
        },

        "SESSION_AUTH_SECRET": {
            "description": "Session auth secret is used to sign cookies for operators",
            "generator": "secret"
        },
        "SESSION_ENCRYPTION_SECRET": {
            "description": "Session encryption secret is used to encrypt cookies for operators",
            "generator": "secret"
        },
 
        "GITGATEWAY_GCP_SECRET": {
            "description": "Name of the GCP Secret Manager secret (formats: 'name' / 'projects/project/secrets/name' / 'projects/project/secrets/name/versions/latest')",
            "required": true,
            "value": "git-gateway"
        }
    },
    "options": {
        "allow-unauthenticated": false,
        "memory": "512Mi",
        "cpu": "1",
        "http2": true
    },
    "build": {
        "skip": true
    },
    "hooks": {
        "precreate": {
            "commands": [
                "./prepare.sh"
            ]
        },
        "prebuild": {
            "commands": [
                "./build.sh"
            ]
        },
        "postcreate": {
            "commands": [
                "./post.sh"
            ]
        }
    }
}